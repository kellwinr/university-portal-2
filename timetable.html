<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UTAR Portal | My Timetable</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="icon" href="assets/img/logo-placeholder.png">

    <style>
        /* --- 1. LAYOUT FIX (Widen the page) --- */
        .container, .portal-layout {
            max-width: 1400px !important;
            padding: 0 40px !important;
        }

        /* --- 2. TIMETABLE GRID STYLES --- */
        .timetable-scroll-wrapper {
            margin-bottom: 30px;
            background: white;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            overflow-x: auto; 
        }

        .tt-grid {
            display: grid !important;
            grid-template-columns: 50px repeat(24, minmax(40px, 1fr)) !important; 
            grid-auto-rows: minmax(55px, auto);
            gap: 1px;
            background: #e0e0e0;
            border: 1px solid #e0e0e0;
            min-width: 1000px;
        }

        .tt-head, .tt-head-corner {
            background: #5D9CEC; color: white; font-weight: 700; font-size: 11px;
            display: flex; align-items: center; justify-content: center; padding: 6px 0;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .tt-head { grid-column: span 2; border-left: 1px solid rgba(255,255,255,0.2); }

        .tt-day {
            background: #FDFD96; color: #333; font-weight: 700; font-size: 11px;
            display: flex; align-items: center; justify-content: center; text-transform: uppercase;
        }

        .tt-slot { background: white; }

        .tt-block {
            padding: 2px 4px; font-size: 9px; line-height: 1.25; color: #1d1d1f;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center; position: relative; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.03);
        }
        .tt-block strong { font-weight: 800; font-size: 10px; margin-bottom: 1px; display: block; }
        .red-text { color: #d32f2f; font-weight: 700; font-size: 9px; margin-top: 1px; }

        .lecture { background: #E3F2DA; border-left: 3px solid #8BC34A; } 
        .tutorial { background: #DAF0F2; border-left: 3px solid #00BCD4; }

        /* --- 3. LIST TABLE STYLES --- */
        .list-header-row, .list-data-row {
            display: grid !important;
            grid-template-columns: 40px 90px 3fr 50px 60px 70px 50px 180px 50px !important;
            gap: 10px !important; padding: 10px 15px !important; align-items: center !important; font-size: 11px !important;
        }
        .list-header-row { background: #4A90E2; color: white; font-weight: 700; text-transform: uppercase; text-align: center; border-radius: 6px 6px 0 0; }
        .list-data-row { background: white; border-bottom: 1px solid #eee; text-align: center; font-weight: 500; }
        .list-data-row > div:nth-child(3) { text-align: left; padding-left: 10px; font-weight: 600; color: #333; }
        .list-data-row a { text-decoration: none; color: #007AFF; font-weight: 700; }
        .link-cell { color: #007AFF; text-decoration: underline; cursor: pointer; }

        /* --- 4. MAC WINDOW POPUP --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.4); 
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: none;
            justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .modal-overlay.open { display: flex; opacity: 1; pointer-events: auto; }

        .mac-window {
            width: 650px; max-width: 90%; background: #fff;
            border-radius: 12px; box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
            overflow: hidden; border: 1px solid rgba(0,0,0,0.1);
            transform: scale(0.9) translateY(20px); opacity: 0;
            transition: all 0.4s cubic-bezier(0.19, 1, 0.22, 1);
        }

        .modal-overlay.open .mac-window { transform: scale(1) translateY(0); opacity: 1; }

        .mac-title-bar {
            background: #efefef; height: 38px; display: flex; align-items: center;
            padding: 0 15px; border-bottom: 1px solid #dcdcdc; position: relative;
        }

        .traffic-lights { display: flex; gap: 8px; }
        .dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; }
        .dot.red { background: #ff5f56; border: 1px solid #e0443e; cursor: pointer; }
        .dot.yellow { background: #ffbd2e; border: 1px solid #dea123; }
        .dot.green { background: #27c93f; border: 1px solid #1aab29; }

        .window-title {
            position: absolute; left: 0; right: 0; text-align: center;
            font-weight: 600; font-size: 13px; color: #444; pointer-events: none;
        }

        .mac-body { padding: 30px 40px; }

        .btn-close-preview {
            display: block; width: 100%; margin-top: 25px; padding: 12px;
            background: #f5f5f7; color: #333; border: 1px solid #d1d1d6;
            border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; transition: all 0.2s;
        }
        .btn-close-preview:hover { background: #e5e5ea; border-color: #c7c7cc; }
    </style>
</head>
<body>

    <div class="background-mesh"></div>

    <header class="glass-nav animate-enter delay-1">
        <div class="nav-container">
            <a href="home.html" class="nav-logo">
                <img src="assets/img/logo-placeholder.png" alt="UTAR">
                <span>Portal</span>
            </a>
            <nav class="nav-links">
                <a href="home.html" class="nav-link">Home</a>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger active">Menu ‚ñæ</a>
                    <div class="dropdown-menu glass-card">
                        <a href="timetable.html">Timetable</a>
                    </div>
                </div>
                <div class="nav-dropdown">
                    <a href="#" class="nav-link dropdown-trigger">Portfolio ‚ñæ</a>
                    <div class="dropdown-menu glass-card">
                        <a href="profile.html">Profile</a>
                    </div>
                </div>
            </nav>
            <div class="nav-user">
                <span class="user-name">Mr. AB Test User</span>
                <a href="index.html" class="btn-logout">Logout</a>
            </div>
        </div>
    </header>

    <main class="portal-layout container">
        
        <aside class="portal-sidebar glass-card animate-enter delay-2">
            <h3>Academics</h3>
            <ul class="sidebar-menu">
                <li><a href="#" class="active">My Timetable</a></li>
                <li><a href="#">Course Registration</a></li>
            </ul>
        </aside>

        <section class="portal-content animate-enter delay-3">
            <div class="glass-card content-padding">
                
                <div id="view-selection">
                    <h2>My Timetable</h2>
                    <div class="info-box"><span class="icon">üìÖ</span><p>Select a session to view.</p></div>
                    <div class="billing-table-container">
                        <div style="display: grid; grid-template-columns: 0.5fr 1fr 2fr 1fr 1fr; padding: 15px; font-weight: 700; border-bottom: 1px solid #ccc; font-size:12px;">
                            <div>No.</div><div>Session</div><div>Duration</div><div>Weeks</div><div style="text-align:right;">Action</div>
                        </div>
                        <div style="display: grid; grid-template-columns: 0.5fr 1fr 2fr 1fr 1fr; padding: 15px; background: white; margin-top: 10px; border-radius: 8px; align-items: center; font-size:13px;">
                            <div>2</div><div><strong>202510</strong></div><div>03/11/2025 - 21/12/2025</div><div>7</div>
                            <div style="text-align: right;">
                                <button class="btn-card-action" onclick="showTimetable()" style="padding: 6px 12px; font-size:12px;">View Timetable</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="view-schedule" style="display: none;">
                    <div class="profile-top-header">
                        <h2>My Timetable</h2>
                        <button class="btn-edit-profile" onclick="hideTimetable()">‚Üê Back</button>
                    </div>
                    
                    <p style="font-size: 13px; color: #666; margin-bottom: 20px;">Mr. AB Test User (02AAA12345)</p>

                    <div class="timetable-scroll-wrapper styled-scroll">
                        <div class="tt-grid">
                            <div class="tt-head-corner" style="background:#4A90E2;">Day/Time</div>
                            <div class="tt-head">07:00</div><div class="tt-head">08:00</div><div class="tt-head">09:00</div>
                            <div class="tt-head">10:00</div><div class="tt-head">11:00</div><div class="tt-head">12:00</div>
                            <div class="tt-head">01:00</div><div class="tt-head">02:00</div><div class="tt-head">03:00</div>
                            <div class="tt-head">04:00</div><div class="tt-head">05:00</div><div class="tt-head">06:00</div>

                            <div class="tt-day">Mon</div>
                            <div class="tt-slot empty" style="grid-column: span 6;"></div>
                            <div class="tt-block lecture" style="grid-column: span 4;"><strong>LDK2</strong>UAPP3063(L)(1)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 3;"></div>
                            <div class="tt-block lecture" style="grid-column: span 4;"><strong>LDK1</strong>UAPP3063(L)(1)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 7;"></div>

                            <div class="tt-day">Tue</div>
                            <div class="tt-slot empty" style="grid-column: span 6;"></div>
                            <div class="tt-block lecture" style="grid-column: span 6;"><strong>LDK4</strong>UAPP3074(L)(1)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 6;"></div>
                            <div class="tt-block tutorial" style="grid-column: span 2;"><strong>H015</strong>UAPP3063(T)(4)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-block tutorial" style="grid-column: span 2;"><strong>H015</strong>UAPP3063(T)(4)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 2;"></div>

                            <div class="tt-day">Wed</div>
                            <div class="tt-slot empty" style="grid-column: span 2;"></div>
                            <div class="tt-block lecture" style="grid-column: span 6;"><strong>LDK4</strong>UAPP3074(L)(1)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 10;"></div>
                            <div class="tt-block tutorial" style="grid-column: span 2;"><strong>P107</strong>UAPP3074(T)(4)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-block tutorial" style="grid-column: span 2;"><strong>P107</strong>UAPP3074(T)(4)<br>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 2;"></div>

                            <div class="tt-day">Thu</div><div class="tt-slot empty" style="grid-column: span 24;"></div>
                            <div class="tt-day">Fri</div><div class="tt-slot empty" style="grid-column: span 24;"></div>
                            <div class="tt-day">Sat</div><div class="tt-slot empty" style="grid-column: span 24;"></div>

                            <div class="tt-day">Sun</div>
                            <div class="tt-slot empty" style="grid-column: span 2;"></div>
                            <div class="tt-block lecture" style="grid-column: span 4;"><strong>UAPZ3013(L)(3)</strong>Physical<span class="red-text">1-7</span></div>
                            <div class="tt-slot empty" style="grid-column: span 18;"></div>
                        </div>
                    </div>

                    <div style="margin-top: 40px;">
                        <div class="list-header-row">
                            <div>No</div><div>Unit</div><div>Description</div><div>Type</div><div>Group</div><div>Attn</div><div>Day</div><div>Time</div><div>Hour</div>
                        </div>
                        <div class="list-data-row"><div>1</div><div><a href="#" onclick="openLecturerModal('UAPP3063')">UAPP3063</a></div><div>HEALTH PSYCHOLOGY</div><div>L</div><div>1</div><div class="link-cell">View</div><div>Mon<br>Mon</div><div>10:00 AM - 12:00 PM<br>1:30 PM - 3:30 PM</div><div>2.0<br>2.0</div></div>
                        <div class="list-data-row"><div>2</div><div><a href="#" onclick="openLecturerModal('UAPP3074')">UAPP3074</a></div><div>CONTEMPORARY ISSUES IN PSYCHOLOGY</div><div>L</div><div>1</div><div class="link-cell">View</div><div>Tue<br>Wed</div><div>10:00 AM - 1:00 PM<br>8:00 AM - 11:00 AM</div><div>3.0<br>3.0</div></div>
                        <div class="list-data-row"><div>3</div><div><a href="#" onclick="openLecturerModal('UAPP3063')">UAPP3063</a></div><div>HEALTH PSYCHOLOGY</div><div>T</div><div>4</div><div class="link-cell">View</div><div>Tue<br>Tue</div><div>4:00 PM - 5:00 PM<br>5:00 PM - 6:00 PM</div><div>1.0<br>1.0</div></div>
                        <div class="list-data-row"><div>4</div><div><a href="#" onclick="openLecturerModal('UAPP3074')">UAPP3074</a></div><div>CONTEMPORARY ISSUES IN PSYCHOLOGY</div><div>T</div><div>4</div><div class="link-cell">View</div><div>Wed<br>Wed</div><div>4:00 PM - 5:00 PM<br>5:00 PM - 6:00 PM</div><div>1.0<br>1.0</div></div>
                        <div class="list-data-row"><div>5</div><div><a href="#" onclick="openLecturerModal('UAPZ3013')">UAPZ3013</a></div><div>FINAL YEAR PROJECT I</div><div>L</div><div>3</div><div class="link-cell">View</div><div>Sun</div><div>8:00 AM - 10:00 AM</div><div>2.0</div></div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="lecturer-modal" class="modal-overlay">
        <div class="mac-window">
            <div class="mac-title-bar">
                <div class="traffic-lights">
                    <span class="dot red" onclick="closeModal()"></span> <span class="dot yellow"></span> <span class="dot green"></span>
                </div>
                <span class="window-title">Lecturer's available time slot</span>
            </div>
            <div class="mac-body">
                <h2 style="font-size: 22px; margin-bottom: 20px; font-family: 'Times New Roman', serif;">
                    Lecturer's available time slot for Unit <span id="modal-unit-code"></span>
                </h2>
                <div class="lecturer-header">
                    <div class="lecturer-info" style="flex: 1;">
                        <div class="data-row-modal"><span class="label">Name :</span> <span class="value" id="modal-lecturer-name">Dr. Jane Doe</span></div>
                        <div class="data-row-modal"><span class="label">Faculty :</span> <span class="value">Faculty of Arts and Social Science</span></div>
                        <div class="data-row-modal"><span class="label">Department :</span> <span class="value">Department of Psychology and Counselling</span></div>
                        <div class="data-row-modal"><span class="label">Email Address :</span> <span class="value email-link" id="modal-email">janedoe@utar.edu.my</span></div>
                        <div class="data-row-modal"><span class="label">Contact Number :</span> <span class="value">05-4688888 Ext. 4240</span></div>
                        <br>
                        <div class="data-row-modal"><span class="label">Room Number :</span> <span class="value">PF-074</span></div>
                    </div>
                    <div class="lecturer-photo" style="margin-left: 20px;">
                        <div style="width: 110px; height: 130px; background: #eee; border: 1px solid #ccc; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                            <img src="https://via.placeholder.com/110x130?text=Photo" alt="Lecturer" style="width:100%; height:100%; object-fit:cover;">
                        </div>
                    </div>
                </div>
                <div style="margin-top: 25px; border-top: 1px dashed #ccc; padding-top: 15px;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr 1fr; font-weight: 700; font-size: 13px; margin-bottom: 10px;">
                        <div>Day(s) of Week</div><div>Date & Time</div><div>Category</div><div>Remark</div>
                    </div>
                    <p style="font-size: 13px; color: #333;">-- Oops! <span id="modal-lecturer-name-2">Dr. Jane Doe</span> does not have available time slot. --</p>
                </div>
                <button class="btn-close-preview" onclick="closeModal()">Close Preview</button>
            </div>
        </div>
    </div>

    <script src="assets/js/main.js"></script>
    <script>
        function showTimetable() { document.getElementById('view-selection').style.display='none'; document.getElementById('view-schedule').style.display='block'; }
        function hideTimetable() { document.getElementById('view-selection').style.display='block'; document.getElementById('view-schedule').style.display='none'; }
        
        // MOCK DATA (All names sanitized)
        const lecturerDB = {
            'UAPP3063': { name: 'Dr. Jane Doe', email: 'janedoe@utar.edu.my' },
            'UAPP3074': { name: 'Mr. John Smith', email: 'johnsmith@utar.edu.my' },
            'UAPZ3013': { name: 'Prof. Alan Turing', email: 'alant@utar.edu.my' }
        };

        function openLecturerModal(unit) { 
            const data = lecturerDB[unit] || lecturerDB['UAPP3063'];
            document.getElementById('modal-unit-code').innerText=unit; 
            document.getElementById('modal-lecturer-name').innerText=data.name;
            document.getElementById('modal-lecturer-name-2').innerText=data.name;
            document.getElementById('modal-email').innerText=data.email;
            
            // Add 'open' class to trigger animation and lock scroll
            document.getElementById('lecturer-modal').classList.add('open');
            document.body.style.overflow = 'hidden'; 
        }
        function closeModal() { 
            document.getElementById('lecturer-modal').classList.remove('open');
            document.body.style.overflow = 'auto'; 
        }
    </script>
</body>
</html>
